MANDATORY TASK LOGGING (do this before any other work):\n1) Ensure there is a directory named `tasks/` at repo root (create if missing).\n2) Determine the next task number by listing existing files `tasks/task_*.md`:\n   - If none exist, start with task number = 1.\n   - Otherwise, set task number = (max existing number + 1).\n3) Create a new markdown file: `tasks/task_{N}.md`.\n4) Save the FULL EXACT PROMPT TEXT (verbatim) into that file, including this mandatory logging block and everything below it.\n5) Only after the file is created, proceed with implementing the task.\n\n\nImplement modlist fetching (SFTP) and parsing.\n\nSFTP:\n- Connect with password OR private key depending on config.servers[].sftp.auth.type.\n- Fetch remote_modlist_path (default /modlist.html) and store a cached copy at:\n  <local_cache_root>/servers/<server_id>/modlist.html\n\nParsing rules:\n- Parse HTML and find rows: tr[data-type="ModContainer"].\n- Extract display_name from td[data-type="DisplayName"] (trim).\n- Extract link from a[data-type="Link"] href.\n- Extract workshop_id from query param "id" in the link.\n- workshop_id must match ^[0-9]+$ else skip row and log warning.\n\nSet comparison:\n- Compute sorted list of ids, and last_modset_hash = sha256(join(ids, ",")).\n\nSlugify rules for folder_slug (from display_name + workshop_id fallback):\n1) trim, lowercase\n2) whitespace (\s+) -> "-"\n3) remove all except [a-z0-9-]\n4) collapse multiple "-" to single\n5) trim "-" ends\nFallback: if empty -> "mod-" + workshop_id\n\nUpdate state:\n- For each server: update last_mod_ids + last_modset_hash when poll succeeds.\n- If modset hash changed vs previous -> set needs_mod_update=true and stage="planning".\n- For each mod id: update mods[id].display_name and mods[id].folder_slug.\n\nAdd unit tests:\n- parse modlist sample (create minimal HTML fixtures)\n- slugify edge cases\n- modset hash stable regardless of order\n\nReturn code changes by file path.
