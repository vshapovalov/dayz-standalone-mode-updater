MANDATORY TASK LOGGING (do this before any other work):\n1) Ensure there is a directory named `tasks/` at repo root (create if missing).\n2) Determine the next task number by listing existing files `tasks/task_*.md`:\n   - If none exist, start with task number = 1.\n   - Otherwise, set task number = (max existing number + 1).\n3) Create a new markdown file: `tasks/task_{N}.md`.\n4) Save the FULL EXACT PROMPT TEXT (verbatim) into that file, including this mandatory logging block and everything below it.\n5) Only after the file is created, proceed with implementing the task.\n\n\nImplement SteamCMD local update stage.\n\nInputs:\n- mods_to_update_locally (workshop_id list) from workshop poll + from first-time sync needs (local_updated_at null).\n\nSteamCMD behavior:\n- Run SteamCMD once per batch:\n  +login <steam.login> <steam.password>\n  +workshop_download_item <steam.workshop_game_id> <id> validate   (for each id in order)\n  +quit\n- Capture stdout/stderr, write to <local_cache_root>/logs/steamcmd.log with password redacted.\n\nSuccess criteria per id:\n- Detect a clear success marker in logs AND verify content directory exists:\n  <steamcmd_workshop_content_root>/<AppID>/<WorkshopID>\nAdd config.paths.steamcmd_workshop_content_root (string) to locate that directory (user will set it).\n\nLocal materialization:\n- After successful download, mirror content from:\n  steamcmd_workshop_content_root/<AppID>/<id>  ->  local_mods_root/<folder_slug>\n- Use atomic directory swap:\n  - build a temp dir in local cache, copy/mirror into it, then rename to target (backup old optionally).\n- Ensure resulting local_mods_root/<folder_slug> is an exact mirror.\n\nState updates:\n- mods[id].local_updated_at = mods[id].workshop_updated_at (or now if workshop_updated_at missing but download succeeded)\n- After each successful mod update, mark servers that use this mod:\n  for any server where id in servers[server].last_mod_ids: set needs_mod_update=true and stage="planning".\n\nAdd unit tests:\n- parsing steamcmd output success/failure markers (use log fixtures)\n- local mirror correctness (small temp dirs)\n- “mark servers that use mod” logic\n\nReturn code changes by file path.
